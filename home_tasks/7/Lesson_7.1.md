# Lesson 7.1

## 1. Подобрать конфигурацию для проекта
### 1.1 Какой тип инфраструктуры будем использовать для этого проекта: изменяемый или не изменяемый?
Выбираем `изменяемый`, т.к. в проекте будем много изменений и вряд ли будет уместным, пересобирать образ при каждом из них.
### 1.2 Будет ли центральный сервер для управления инфраструктурой?
По скольку у нас уже есть большая база Kubernetes конфигураций, а также есть совсем немного Ansible и Bash скриптов, разумно будет управлять всем этим "зоопарком" из одного сервера имеющего доступ к инфраструктуре.
### 1.3 Будут ли агенты на серверах?
В агентах на серверах смысла не вижу т.к. у нас уже есть не большие наработки на Ansible, которому не нужны агенты. Нужно попытаться перенести все что возможно в playbook Ansible, а что не получилось, мы можем выполнить скрипт также через Ansible. Или на крайний случай выполнить его самостоятельно через ssh: 
```shell
ssh [User_Name]@[Rremote_Host_Name or IP] [Command or Script]
```
P.S. выделение отдельно сервера для управления конфигурациями считаю целесообразным ещё и с точки зрения безопасности т.к. на мой взгляд доступ к инфраструктуре должен быть ограничен и внесение в неё изменений должно происходить только с отдельной машины имеющей доступ ТОЛЬКО к этой инфраструктуре. ТОЛЬКО и еще раз ТОЛЬКО =).
### 1.4 Будут ли использованы средства для управления конфигурацией или инициализации ресурсов?
Будем использованною и то и другое. По скольку точных требований у нас нет, мы подготовим базовый образ средствами (ssk-keys, iptables (базовые правила established, related, invalid) и т.д.) инициализации ресурсов. А затем по мере необходимости будем устанавливать дополнительные библиотеки, пакеты и т.д. с помощью средства для управления конфигурацией.
### 1.5 Какие инструменты из уже используемых вы хотели бы использовать для нового проекта?
* `Packer` - собираем образ
* `Terraform` - создаём ВМ
* `Docker` - запаковываем приложение в контейнер
* `Kubernetes` - разворачиваем отказоустойчивый кластер
* `Teamcity` - автоматизируем CI/CD процессы
* `Ansible` - настраиваем сервер
* `bash скрипты` - доделываем настройку, которую не получилось перенести в Ansible playbook
### 1.6 Хотите ли рассмотреть возможность внедрения новых инструментов для этого проекта?
Нужно постараться отказаться от `bash скриптов` в пользу `Ansible playbook`, а также добавить стэк технологий для мониторинга типа `Prometheus + Grafana + Node Exporter + Alertmanager` или `Elasticsearch + Logstash + Kibana`
### 1.7 Если для ответа на эти вопросы недостаточно информации, то напишите какие моменты уточните на совещании.
Нужно постараться максимально точно, на сколько это возможно, выяснить требование к проекту для наиболее качественной подготовки образа. Т.к. на мой взгляд лучше при инициализации ресурсов подготовить сервер, на сколько это возможно, нежели потом заливать на него конфигурацию.

## 2. Установка терраформ
[![2.png](https://i.postimg.cc/vTKhpvMS/2.png)](https://postimg.cc/N21RXmK1)

## 3. Установка терраформ  v.012
[![3.png](https://i.postimg.cc/wvpDRGTp/3.png)](https://postimg.cc/4KWYrw9L)