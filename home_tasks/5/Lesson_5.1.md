# Lesson 5.1

### 1. В чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.
При аппаратной виртуализации гипервизор является ОС, в то время как при паравиртуализации гипервизор устанавливается на ОС. В случае виртуализации на основе ОС у нас отсутствует возможность запускать ОС с ядрами различными от ядра основной системы.

### 2. Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.
####  2.1 Высоконагруженная база данных, чувствительная к отказу.
Я бы выбрал физический сервер т.к. база является одной нет причин ее изолировать (один сервер - один сервис). Т.к. БД является высоконагруженной дополнительный слой абстракции (в виде гипервизора), который тоже потребляет какие-никакие ресурсы, нам не нужен

####  2.2 Различные web-приложения.
Т.к. у нас много разных приложений виртуализация необходима. Тут отлично подойдёт паравиртуализация, например KVM. Это позволит легко поднять, обслуживать и если будет нужно без особых хлопот мигрировать на другое железо или например в облако.

####  2.3 Windows системы для использования бухгалтерским отделом.
С этой задачей отлично справится виртуализация на основе ОС т.к. все наши сервисы работают на одном ядре и у нас не будет накладных расходов для поддержания различных ядер ОС.

####  2.4 Системы, выполняющие высокопроизводительные расчеты на GPU.
Здесь лучше использовать физический т.к. нам нужны высокопроизводительные расчеты на GPU.

### 3. Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.
#### 3.1 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
По скольку у нас преимущественно Windows based инфраструктура разумно использовать Microsoft Hyper-v

#### 3.2 Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
Подойдёт KVM т.к. является open source, прост в настройке и поддерживает ядра гостевых машин как Linux, так и Windows.

#### 3.3 Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
Здесь нам может помочь снова KVM, т.к. является бесплатным и отлично поддерживает гостевые машины с ядром Windows.

#### 3.4 Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
И снова KVM, т.к. прост в настройке, а главное является модулем ядра большинства дистрибутивов Linux. Хотя для теста нескольких ВМ вполне хватит и VirtualBox.

### 4. Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.
* Основная проблема в "зоопарке" гипервизоров - это проблема совместимости. Т.е. на пример, перед остановкой одного из наших серверов (для обслуживания и т.д.) необходимо временно перенести работающие на нем ВМ на сервера со свободными ресурсами, что создает очень большую проблему т.к. различные гипервизоры имеют различные форматы ВМ, и само собой остаётся вопрос live migration.
* Если сложилась ситуация, что мы уже имеем гетерогенную среду, на мой правильным решением будет потихоньку (возможно по 1 ВМ, зависит от количества и сопутствующих проблем) избавляться от "зоопарка", т.е. выбрать необходимый минимум типов гипервизоров, а в идеале только один и переходить на него.
* В случае проектировки серверной инфраструктуры я бы выбрал гетерогенную среду только, если наши сервисы можно явно разделить на две группы (не более 2-х, чтобы не плодить "зоопарк"), которые подразумевают, для большей производительности, отказоустойчивости т.д. работу в различных гипервизорах.
 
Например:
1. VPN-сервис. Часть сервисов для бухгалтерии на Windows (`Hyper-v`) и вторая часть - сервера VPN (`Xen`).
2. IT продукт (Linux Desktop). Часть сервисов для бухгалтерии на Windows (`Hyper-v`) и вторая часть - экземпляры ПП для разработки и тестировки (`KVM`).